{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Jumbotron,Container,CardColumns,Card,Button,Form,Alert}from\"react-bootstrap\";import Auth from\"../utils/auth\";import{useQuery,useMutation,useLazyQuery}from\"@apollo/client\";import{GET_ME}from\"../utils/queries\";import FundraiserCard from\"../components/FundraiserCard\";import{ADD_FUNDRAISER}from\"../utils/mutations\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CreatedFundraiser=()=>{const[userData,setUserData]=useState({});const[newFundraiserData,setNewFundraiserData]=useState({title:\"\",image:\"\",description:\"\"});const[addFundraiser,addFundraiserResp]=useMutation(ADD_FUNDRAISER);const[created,setCreated]=useState(false);const{loading}=useQuery(GET_ME,{onCompleted:dt=>{setUserData(dt.me);}});if(!Auth.loggedIn()){return/*#__PURE__*/_jsx(\"h1\",{children:\"Please login to save the fundraiser\"});}const userDataLength=Object.keys(userData).length;const handleInputChange=e=>{e.preventDefault();const{name,value}=e.target;setNewFundraiserData({...newFundraiserData,[name]:value});};const handleFundraiserCreate=async e=>{e.preventDefault();try{await addFundraiser({variables:{...newFundraiserData,posterUsername:Auth.getProfile().data.username}});setNewFundraiserData({title:\"\",image:\"\",description:\"\"});setCreated(true);}catch(err){console.log(\"Error creating fundraiser\",err);}};if(!userDataLength){return/*#__PURE__*/_jsx(\"h2\",{children:\"LOADING data...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Jumbotron,{fluid:true,className:\"text-light page-header\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Viewing created fundraisers!\"})})}),/*#__PURE__*/_jsxs(Container,{className:\"form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create new fundraiser\"}),/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleFundraiserCreate,children:[created&&/*#__PURE__*/_jsx(Alert,{dismissible:true,variant:\"success\",onClose:()=>setCreated(false),children:\"Created fundraiser\"}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Fundraiser title\",name:\"title\",onChange:handleInputChange,value:newFundraiserData.title,required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Title is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"image\",children:\"Image url\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Image url\",name:\"image\",onChange:handleInputChange,value:newFundraiserData.image,required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Image is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",type:\"text\",placeholder:\"Description\",name:\"description\",onChange:handleInputChange,value:newFundraiserData.description,required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Description is required.\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"success\",className:\"createBtn\",children:\"Create\"})]})]}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{children:userData.createdFundraisers.length?`Viewing ${userData.createdFundraisers.length} created ${userData.createdFundraisers.length===1?\"fundraiser\":\"fundraisers\"}:`:\"You have no saved fundraisers!\"}),/*#__PURE__*/_jsx(CardColumns,{children:[...userData.createdFundraisers].reverse().map(fundraiser=>{return/*#__PURE__*/_jsx(FundraiserCard,{fundraiser:fundraiser});})})]})]});};export default CreatedFundraiser;","map":{"version":3,"names":["React","useState","useEffect","Jumbotron","Container","CardColumns","Card","Button","Form","Alert","Auth","useQuery","useMutation","useLazyQuery","GET_ME","FundraiserCard","ADD_FUNDRAISER","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreatedFundraiser","userData","setUserData","newFundraiserData","setNewFundraiserData","title","image","description","addFundraiser","addFundraiserResp","created","setCreated","loading","onCompleted","dt","me","loggedIn","children","userDataLength","Object","keys","length","handleInputChange","e","preventDefault","name","value","target","handleFundraiserCreate","variables","posterUsername","getProfile","data","username","err","console","log","fluid","className","noValidate","onSubmit","dismissible","variant","onClose","Group","Label","htmlFor","Control","type","placeholder","onChange","required","Feedback","as","createdFundraisers","reverse","map","fundraiser"],"sources":["C:/Users/VISHAKHA/Desktop/shreya/shreya/client/src/pages/CreatedFundraiser.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Jumbotron,\r\n  Container,\r\n  CardColumns,\r\n  Card,\r\n  Button,\r\n  Form,\r\n  Alert,\r\n} from \"react-bootstrap\";\r\n\r\nimport Auth from \"../utils/auth\";\r\nimport { useQuery, useMutation, useLazyQuery } from \"@apollo/client\";\r\nimport { GET_ME } from \"../utils/queries\";\r\nimport FundraiserCard from \"../components/FundraiserCard\";\r\nimport { ADD_FUNDRAISER } from \"../utils/mutations\";\r\n\r\nconst CreatedFundraiser = () => {\r\n  const [userData, setUserData] = useState({});\r\n\r\n  const [newFundraiserData, setNewFundraiserData] = useState({\r\n    title: \"\",\r\n    image: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  const [addFundraiser, addFundraiserResp] = useMutation(ADD_FUNDRAISER);\r\n  const [created, setCreated] = useState(false);\r\n\r\n  const { loading } = useQuery(GET_ME, {\r\n    onCompleted: (dt) => {\r\n      setUserData(dt.me);\r\n    },\r\n  });\r\n\r\n  if (!Auth.loggedIn()) {\r\n    return <h1>Please login to save the fundraiser</h1>;\r\n  }\r\n\r\n  const userDataLength = Object.keys(userData).length;\r\n\r\n  const handleInputChange = (e) => {\r\n    e.preventDefault();\r\n    const { name, value } = e.target;\r\n    setNewFundraiserData({ ...newFundraiserData, [name]: value });\r\n  };\r\n\r\n  const handleFundraiserCreate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await addFundraiser({\r\n        variables: {\r\n          ...newFundraiserData,\r\n          posterUsername: Auth.getProfile().data.username,\r\n        },\r\n      });\r\n      setNewFundraiserData({\r\n        title: \"\",\r\n        image: \"\",\r\n        description: \"\",\r\n      });\r\n      setCreated(true);\r\n    } catch (err) {\r\n      console.log(\"Error creating fundraiser\", err);\r\n    }\r\n  };\r\n\r\n  if (!userDataLength) {\r\n    return <h2>LOADING data...</h2>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Jumbotron fluid className=\"text-light page-header\">\r\n        <Container>\r\n          <h1>Viewing created fundraisers!</h1>\r\n        </Container>\r\n      </Jumbotron>\r\n      <Container className=\"form\">\r\n        <h2>Create new fundraiser</h2>\r\n        <Form noValidate onSubmit={handleFundraiserCreate}>\r\n          {created && (\r\n            <Alert\r\n              dismissible\r\n              variant=\"success\"\r\n              onClose={() => setCreated(false)}\r\n            >\r\n              Created fundraiser\r\n            </Alert>\r\n          )}\r\n          <Form.Group>\r\n            <Form.Label htmlFor=\"title\">Title</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Fundraiser title\"\r\n              name=\"title\"\r\n              onChange={handleInputChange}\r\n              value={newFundraiserData.title}\r\n              required\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              Title is required.\r\n            </Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Label htmlFor=\"image\">Image url</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Image url\"\r\n              name=\"image\"\r\n              onChange={handleInputChange}\r\n              value={newFundraiserData.image}\r\n              required\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              Image is required.\r\n            </Form.Control.Feedback>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Label htmlFor=\"description\">Description</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              type=\"text\"\r\n              placeholder=\"Description\"\r\n              name=\"description\"\r\n              onChange={handleInputChange}\r\n              value={newFundraiserData.description}\r\n              required\r\n            />\r\n            <Form.Control.Feedback type=\"invalid\">\r\n              Description is required.\r\n            </Form.Control.Feedback>\r\n          </Form.Group>\r\n          <Button type=\"submit\" variant=\"success\" className=\"createBtn\">\r\n            Create\r\n          </Button>\r\n        </Form>\r\n      </Container>\r\n      <Container>\r\n        <h2>\r\n          {userData.createdFundraisers.length\r\n            ? `Viewing ${userData.createdFundraisers.length} created ${\r\n                userData.createdFundraisers.length === 1\r\n                  ? \"fundraiser\"\r\n                  : \"fundraisers\"\r\n              }:`\r\n            : \"You have no saved fundraisers!\"}\r\n        </h2>\r\n        <CardColumns>\r\n          {[...userData.createdFundraisers].reverse().map((fundraiser) => {\r\n            return <FundraiserCard fundraiser={fundraiser} />;\r\n          })}\r\n        </CardColumns>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreatedFundraiser;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}