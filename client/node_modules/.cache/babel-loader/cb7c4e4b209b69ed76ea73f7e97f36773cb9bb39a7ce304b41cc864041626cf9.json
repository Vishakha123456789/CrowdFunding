{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Jumbotron,Container,Col,Form,Button,Card,Row,CardColumns}from\"react-bootstrap\";import{Animated}from\"react-animated-css\";import Auth from\"../utils/auth\";import{saveFundraiserIds,getSavedFundraiserIds}from\"../utils/localStorage\";import{ADD_FUNDRAISER}from\"../utils/mutations\";import{GET_ALL_FUNDRAISERS}from\"../utils/queries\";import{useMutation,useQuery}from\"@apollo/client\";import FundraiserCard from\"../components/FundraiserCard\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SearchFundraisers=()=>{const[searchedFundraisers,setSearchedFundraisers]=useState([]);const[searchInput,setSearchInput]=useState(\"\");const[savedFundraiserIds,setSavedFundraiserIds]=useState(getSavedFundraiserIds());const getAllFundRaisers=useQuery(GET_ALL_FUNDRAISERS,{onCompleted:fundData=>{setSearchedFundraisers(fundData.getAllFundRaisers);console.log(\"got fund data\",fundData);}});useEffect(()=>{return()=>saveFundraiserIds(savedFundraiserIds);});const handleSearchChange=e=>{e.preventDefault();setSearchInput(e.target.value);};const getFilteredResults=allResult=>{const reversed=[...searchedFundraisers].reverse();return reversed.filter(fundraiser=>{return fundraiser.title.toLowerCase().includes(searchInput.toLowerCase())||fundraiser.description.toLowerCase().includes(searchInput.toLowerCase());});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Jumbotron,{fluid:true,className:\"text-light page-header\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Browse Fundraisers!\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formSearch\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"search\",placeholder:\"Search\",className:\"search\",width:50,onChange:handleSearchChange})})]})}),getAllFundRaisers.loading&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading fundraisers\"}),!getAllFundRaisers.loading&&searchedFundraisers&&/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[getFilteredResults(searchedFundraisers).length,\" Fundraisers\"]}),/*#__PURE__*/_jsx(CardColumns,{children:getFilteredResults(searchedFundraisers).map(fundraiser=>{return/*#__PURE__*/_jsx(FundraiserCard,{fundraiser:fundraiser});})})]})]});};export default SearchFundraisers;","map":{"version":3,"names":["React","useState","useEffect","Jumbotron","Container","Col","Form","Button","Card","Row","CardColumns","Animated","Auth","saveFundraiserIds","getSavedFundraiserIds","ADD_FUNDRAISER","GET_ALL_FUNDRAISERS","useMutation","useQuery","FundraiserCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchFundraisers","searchedFundraisers","setSearchedFundraisers","searchInput","setSearchInput","savedFundraiserIds","setSavedFundraiserIds","getAllFundRaisers","onCompleted","fundData","console","log","handleSearchChange","e","preventDefault","target","value","getFilteredResults","allResult","reversed","reverse","filter","fundraiser","title","toLowerCase","includes","description","children","fluid","className","Group","controlId","Control","type","placeholder","width","onChange","loading","length","map"],"sources":["C:/Users/VISHAKHA/Desktop/shreya/shreya/client/src/pages/SearchFundraiser.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Jumbotron,\r\n  Container,\r\n  Col,\r\n  Form,\r\n  Button,\r\n  Card,\r\n  Row,\r\n  CardColumns,\r\n} from \"react-bootstrap\";\r\nimport { Animated } from \"react-animated-css\";\r\n\r\nimport Auth from \"../utils/auth\";\r\nimport {\r\n  saveFundraiserIds,\r\n  getSavedFundraiserIds,\r\n} from \"../utils/localStorage\";\r\nimport { ADD_FUNDRAISER } from \"../utils/mutations\";\r\nimport { GET_ALL_FUNDRAISERS } from \"../utils/queries\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport FundraiserCard from \"../components/FundraiserCard\";\r\n\r\nconst SearchFundraisers = () => {\r\n  const [searchedFundraisers, setSearchedFundraisers] = useState([]);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [savedFundraiserIds, setSavedFundraiserIds] = useState(\r\n    getSavedFundraiserIds()\r\n  );\r\n\r\n  const getAllFundRaisers = useQuery(GET_ALL_FUNDRAISERS, {\r\n    onCompleted: (fundData) => {\r\n      setSearchedFundraisers(fundData.getAllFundRaisers);\r\n\r\n      console.log(\"got fund data\", fundData);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => saveFundraiserIds(savedFundraiserIds);\r\n  });\r\n\r\n  const handleSearchChange = (e) => {\r\n    e.preventDefault();\r\n    setSearchInput(e.target.value);\r\n  };\r\n\r\n  const getFilteredResults = (allResult) => {\r\n    const reversed = [...searchedFundraisers].reverse();\r\n    return reversed.filter((fundraiser) => {\r\n      return (\r\n        fundraiser.title.toLowerCase().includes(searchInput.toLowerCase()) ||\r\n        fundraiser.description.toLowerCase().includes(searchInput.toLowerCase())\r\n      );\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <Jumbotron fluid className=\"text-light page-header\">\r\n        <Container>\r\n          <h1>Browse Fundraisers!</h1>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"formSearch\">\r\n            <Form.Control\r\n              type=\"search\"\r\n              placeholder=\"Search\"\r\n              className=\"search\"\r\n              width={50}\r\n              onChange={handleSearchChange}\r\n            />\r\n          </Form.Group>\r\n        </Container>\r\n      </Jumbotron>\r\n\r\n      {getAllFundRaisers.loading && <h1>Loading fundraisers</h1>}\r\n      {!getAllFundRaisers.loading && searchedFundraisers && (\r\n        <Container>\r\n          <h2>{getFilteredResults(searchedFundraisers).length} Fundraisers</h2>\r\n          <CardColumns>\r\n            {getFilteredResults(searchedFundraisers).map((fundraiser) => {\r\n              return <FundraiserCard fundraiser={fundraiser} />;\r\n            })}\r\n          </CardColumns>\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SearchFundraisers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}